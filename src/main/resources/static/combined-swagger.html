<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HLS Gateway API</title>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5/swagger-ui.css" />
    <style>
      html, body { height: 100%; margin: 0; }
      body { background: #f7f7f7; }
      #swagger-ui { height: 100%; }
    </style>
  </head>
  <body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-standalone-preset.js"></script>
    <script>
      window.onload = function () {
        if (window.location.protocol === "file:") {
          document.body.innerHTML =
            '<div style="font-family: sans-serif; padding: 24px;">' +
            "<h2>Swagger UI must be served over HTTP</h2>" +
            "<p>This page was opened as a local file, so browser CORS blocks API calls.</p>" +
            '<p>Open <a href="http://localhost:8088/combined-swagger.html">http://localhost:8088/combined-swagger.html</a> instead.</p>' +
            "</div>";
          return;
        }
        window.ui = SwaggerUIBundle({
          spec: {"openapi": "3.1.0", "info": {"title": "HLS Gateway API", "version": "1.0.0"}, "servers": [{"url": "http://localhost:8088"}], "tags": [{"name": "Order", "description": "Order and tickets management APIs"}], "paths": {"/api/orders/{orderId}/pay": {"post": {"tags": ["Order"], "summary": "Оплата билетов по заказу", "operationId": "payTickets", "parameters": [{"name": "orderId", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"404": {"description": "Not Found", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "400": {"description": "Bad Request", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "409": {"description": "Conflict", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/OrderDto"}}}}}}}, "/api/orders/reserve": {"post": {"tags": ["Order"], "summary": "Резервирование билетов", "operationId": "reserveTickets", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/OrderPayload"}}}, "required": true}, "responses": {"404": {"description": "Not Found", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "400": {"description": "Bad Request", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "409": {"description": "Conflict", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/OrderDto"}}}}}}}, "/api/orders/{orderId}": {"get": {"tags": ["Order"], "summary": "Получение заказа (reactive + JPA)", "operationId": "getOrderReactive", "parameters": [{"name": "orderId", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"404": {"description": "Not Found", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "400": {"description": "Bad Request", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "409": {"description": "Conflict", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/OrderDto"}}}}}}}, "/api/orders/{orderId}/tickets": {"get": {"tags": ["Order"], "summary": "Получение билетов по заказу с постраничной прокруткой", "operationId": "getTicketsPage", "parameters": [{"name": "orderId", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}, {"name": "page", "in": "query", "required": false, "schema": {"type": "integer", "format": "int32"}}, {"name": "size", "in": "query", "required": false, "schema": {"type": "integer", "format": "int32"}}], "responses": {"404": {"description": "Not Found", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "400": {"description": "Bad Request", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "409": {"description": "Conflict", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ApiErrorDto"}}}}, "200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/TicketDto"}}}}}}}}, "/api/shows/performance/{id}": {"put": {"tags": ["show-controller"], "operationId": "updatePerformance", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/PerformanceDto"}}}, "required": true}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/PerformanceDto"}}}}}}}, "/api/shows": {"get": {"tags": ["show-controller"], "operationId": "getAllShows", "parameters": [{"name": "city", "in": "query", "required": true, "schema": {"type": "string"}}, {"name": "page", "in": "query", "required": true, "schema": {"type": "integer", "format": "int32"}}, {"name": "pageSize", "in": "query", "required": true, "schema": {"type": "integer", "format": "int32"}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/ShowViewDto"}}}}}}}, "post": {"tags": ["show-controller"], "operationId": "createShow", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/ShowCreateDto"}}}, "required": true}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ShowDto"}}}}}}}, "/api/shows/performance": {"post": {"tags": ["show-controller"], "operationId": "createPerformance", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/PerformanceCreateDto"}}}, "required": true}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/PerformanceDto"}}}}}}}, "/api/shows/{id}": {"get": {"tags": ["show-controller"], "operationId": "getShow", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/ShowDto"}}}}}}}, "/api/shows/{id}/seats": {"get": {"tags": ["show-controller"], "operationId": "getAllSeatsPaged", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}, {"name": "page", "in": "query", "required": false, "schema": {"type": "integer", "format": "int32"}}, {"name": "pageSize", "in": "query", "required": false, "schema": {"type": "integer", "format": "int32"}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/SeatRawDto"}}}}}}}}, "/api/shows/theatre/{theatreId}": {"get": {"tags": ["show-controller"], "operationId": "getShowsByTheatre", "parameters": [{"name": "theatreId", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}, {"name": "from", "in": "query", "required": true, "schema": {"type": "string", "format": "date-time"}}, {"name": "to", "in": "query", "required": true, "schema": {"type": "string", "format": "date-time"}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/ShowViewDto"}}}}}}}}, "/api/theatres": {"get": {"tags": ["theatre-controller"], "operationId": "getAllTheatres", "parameters": [{"name": "city", "in": "query", "required": true, "schema": {"type": "string"}}, {"name": "page", "in": "query", "required": false, "schema": {"type": "integer", "format": "int32", "default": 1}}, {"name": "size", "in": "query", "required": false, "schema": {"type": "integer", "format": "int32", "default": 10}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/TheatreViewDto"}}}}}}}, "put": {"tags": ["theatre-controller"], "operationId": "updateTheatre", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/TheatrePayload"}}}, "required": true}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/TheatrePayload"}}}}}}, "post": {"tags": ["theatre-controller"], "operationId": "createTheatre", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/TheatreCreatePayload"}}}, "required": true}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/TheatrePayload"}}}}}}}, "/api/theatres/halls": {"put": {"tags": ["theatre-controller"], "operationId": "updateHall", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/HallDto"}}}, "required": true}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/HallDto"}}}}}}}, "/api/theatres/{theatreId}/halls": {"post": {"tags": ["theatre-controller"], "operationId": "createHall", "parameters": [{"name": "theatreId", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/HallCreateDto"}}}, "required": true}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/HallDto"}}}}}}}, "/api/theatres/batch": {"post": {"tags": ["theatre-controller"], "operationId": "getTheatres", "requestBody": {"content": {"application/json": {"schema": {"type": "array", "items": {"type": "integer", "format": "int64"}}}}, "required": true}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/TheatreViewDto"}}}}}}}}, "/inner/seats": {"get": {"tags": ["inner-seat-controller"], "operationId": "getSeatPrices", "parameters": [{"name": "showId", "in": "query", "required": true, "schema": {"type": "integer", "format": "int64"}}, {"name": "seats", "in": "query", "required": true, "schema": {"type": "array", "items": {"type": "integer", "format": "int64"}}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/SeatPriceDto"}}}}}}}}, "/api/theatres/{id}": {"get": {"tags": ["theatre-controller"], "operationId": "getTheatreInfo", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/TheatreDto"}}}}}}, "delete": {"tags": ["theatre-controller"], "operationId": "deleteTheatre", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"200": {"description": "OK", "content": {}}}}}, "/api/halls/{id}": {"get": {"tags": ["hall-controller"], "operationId": "getHall", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"$ref": "#/components/schemas/HallViewDto"}}}}}}}, "/api/halls/{id}/seats": {"get": {"tags": ["hall-controller"], "operationId": "getHallSeats", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/SeatRowViewDto"}}}}}}}}, "/api/theatres/halls/{id}": {"delete": {"tags": ["theatre-controller"], "operationId": "deleteHall", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"200": {"description": "OK", "content": {}}}}}, "/api/halls/{id}/prices": {"post": {"tags": ["hall-controller"], "operationId": "setSeatPrices", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}, {"name": "showId", "in": "query", "required": true, "schema": {"type": "integer", "format": "int64"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/SeatPricePayload"}}}}}, "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/SeatPriceDto"}}}}}}}}, "/inner/shows/{showId}/occupied-seats": {"get": {"tags": ["inner-show-controller"], "operationId": "getOccupiedSeats", "parameters": [{"name": "showId", "in": "path", "required": true, "schema": {"type": "integer", "format": "int64"}}], "responses": {"200": {"description": "OK", "content": {"*/*": {"schema": {"type": "array", "items": {"type": "integer", "format": "int64"}}}}}}}}}, "components": {"schemas": {"ApiErrorDto": {"type": "object", "properties": {"message": {"type": "string"}, "timestamp": {"type": "string", "format": "date-time"}}, "required": ["message", "timestamp"]}, "OrderDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "createdAt": {"type": "string", "format": "date-time"}, "reservedAt": {"type": "string", "format": "date-time"}, "status": {"type": "string", "enum": ["PAID", "RESERVED", "CANCELLED"]}, "seatIds": {"type": "array", "items": {"type": "integer", "format": "int64"}}, "price": {"type": "integer", "format": "int32"}}, "required": ["createdAt", "id", "price", "seatIds", "status"]}, "OrderPayload": {"type": "object", "properties": {"seatIds": {"type": "array", "items": {"type": "integer", "format": "int64"}}, "showId": {"type": "integer", "format": "int64"}}, "required": ["seatIds", "showId"]}, "TicketDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "price": {"type": "integer", "format": "int32"}, "raw": {"type": "integer", "format": "int32"}, "number": {"type": "integer", "format": "int32"}}, "required": ["id", "number", "price", "raw"]}, "PerformanceDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "title": {"type": "string"}, "description": {"type": "string"}, "durationMinutes": {"type": "integer", "format": "int32"}, "theatreIds": {"type": "array", "items": {"type": "integer", "format": "int64"}}}, "required": ["id", "theatreIds", "title"]}, "HallViewDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "number": {"type": "integer", "format": "int32"}}, "required": ["number"]}, "ShowCreateDto": {"type": "object", "properties": {"title": {"type": "string"}, "description": {"type": "string"}, "date": {"type": "string", "format": "date-time"}, "durationMinutes": {"type": "integer", "format": "int32"}, "hall": {"$ref": "#/components/schemas/HallViewDto"}, "theatre": {"$ref": "#/components/schemas/TheatreViewDto"}}, "required": ["date", "description", "hall", "theatre", "title"]}, "TheatreViewDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "name": {"type": "string"}, "city": {"type": "string"}, "address": {"type": "string"}}, "required": ["address", "city", "id", "name"]}, "ShowDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "title": {"type": "string"}, "description": {"type": "string"}, "date": {"type": "string", "format": "date-time"}, "durationMinutes": {"type": "integer", "format": "int32"}, "hall": {"$ref": "#/components/schemas/HallViewDto"}, "theatre": {"$ref": "#/components/schemas/TheatreViewDto"}}, "required": ["date", "description", "hall", "id", "theatre", "title"]}, "PerformanceCreateDto": {"type": "object", "properties": {"title": {"type": "string"}, "description": {"type": "string"}, "durationMinutes": {"type": "integer", "format": "int32"}, "theatreIds": {"type": "array", "items": {"type": "integer", "format": "int64"}}}, "required": ["theatreIds", "title"]}, "ShowViewDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "title": {"type": "string"}, "date": {"type": "string", "format": "date-time"}}, "required": ["date", "id", "title"]}, "SeatRawDto": {"type": "object", "properties": {"row": {"type": "integer", "format": "int32"}, "seats": {"type": "array", "items": {"$ref": "#/components/schemas/SeatStatusDto"}}}, "required": ["row", "seats"]}, "SeatStatusDto": {"type": "object", "properties": {"seatId": {"type": "integer", "format": "int64"}, "number": {"type": "integer", "format": "int32"}, "status": {"type": "string"}}, "required": ["number", "seatId", "status"]}, "TheatrePayload": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "name": {"type": "string"}, "city": {"type": "string"}, "address": {"type": "string"}, "halls": {"type": "array", "items": {"$ref": "#/components/schemas/HallViewDto"}}}, "required": ["address", "city", "halls", "id", "name"]}, "HallDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "number": {"type": "integer", "format": "int32"}, "seatRows": {"type": "array", "items": {"$ref": "#/components/schemas/SeatRowCreateDto"}}}, "required": ["seatRows", "number"]}, "HallCreatePayload": {"type": "object", "properties": {"number": {"type": "integer", "format": "int32"}}, "required": ["number"]}, "TheatreCreatePayload": {"type": "object", "properties": {"name": {"type": "string"}, "city": {"type": "string"}, "address": {"type": "string"}, "halls": {"type": "array", "items": {"$ref": "#/components/schemas/HallCreatePayload"}}}, "required": ["address", "city", "halls", "name"]}, "HallCreateDto": {"type": "object", "properties": {"number": {"type": "integer", "format": "int32"}, "seatRows": {"type": "array", "items": {"$ref": "#/components/schemas/SeatRowCreateDto"}}}, "required": ["seatRows", "number"]}, "SeatPriceDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "raw": {"type": "integer", "format": "int32"}, "number": {"type": "integer", "format": "int32"}, "price": {"type": "integer", "format": "int32"}}, "required": ["id", "number", "price", "raw"]}, "TheatreDto": {"type": "object", "properties": {"id": {"type": "integer", "format": "int64"}, "name": {"type": "string"}, "city": {"type": "string"}, "address": {"type": "string"}, "halls": {"type": "array", "items": {"$ref": "#/components/schemas/HallViewDto"}}, "shows": {"type": "array", "items": {"$ref": "#/components/schemas/ShowViewDto"}}}, "required": ["address", "city", "halls", "id", "name", "shows"]}, "SeatRowViewDto": {"type": "object", "properties": {"row": {"type": "integer", "format": "int32"}, "seats": {"type": "array", "items": {"$ref": "#/components/schemas/SeatStatusViewDto"}}}, "required": ["row", "seats"]}, "SeatStatusViewDto": {"type": "object", "properties": {"seatId": {"type": "integer", "format": "int64"}, "number": {"type": "integer", "format": "int32"}, "status": {"type": "string"}}, "required": ["number", "seatId", "status"]}, "SeatCreateDto": {"type": "object", "properties": {"number": {"type": "integer", "format": "int32"}}, "required": ["number"]}, "SeatRowCreateDto": {"type": "object", "properties": {"row": {"type": "integer", "format": "int32"}, "seats": {"type": "array", "items": {"$ref": "#/components/schemas/SeatCreateDto"}}}, "required": ["row", "seats"]}, "SeatPricePayload": {"type": "object", "properties": {"seatId": {"type": "integer", "format": "int64"}, "price": {"type": "integer", "format": "int32"}}, "required": ["seatId", "price"]}}}},
          dom_id: "#swagger-ui",
          deepLinking: true,
          presets: [
            SwaggerUIBundle.presets.apis,
            SwaggerUIStandalonePreset,
          ],
          layout: "BaseLayout",
        });
      };
    </script>
  </body>
</html>
